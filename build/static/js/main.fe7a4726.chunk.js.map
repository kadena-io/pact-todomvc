{"version":3,"sources":["components/todo-item.jsx","components/footer.jsx","components/todo-app.jsx","index.js"],"names":["TodoItem","_React$Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","editText","todo","title","handleChange","bind","assertThisInitialized","handleEdit","handleSubmit","handleKeyDown","inherits","createClass","key","value","nextProps","nextState","editing","prevProps","node","ReactDOM","findDOMNode","refs","editField","focus","setSelectionRange","length","event","val","trim","onSave","onDestroy","onEdit","setState","which","onCancel","id","target","status","completed","react","className","type","checked","onChange","onToggle","onDoubleClick","onClick","ref","onBlur","onKeyDown","React","TodoFooter","_React$PureComponent","apply","arguments","count","word","activeTodoWord","clearButton","completedCount","onClearCompleted","nowShowing","showAll","href","showActive","showCompleted","KP","Pact","crypto","genKeyPair","API_HOST","ALL_TODOS","TodoApp","todos","onChanges","newTodo","handleNewTodoKeyDown","toggleAll","edit","cancel","clearCompleted","save","getTodos","_this2","cmdObj","pactCode","keyPairs","fetch","local","then","res","data","notDeleted","filter","deleted","sort","a","b","_this3","uuid","uuidv4","concat","JSON","stringify","send","_this4","_this5","activeTodos","completedTodos","cmds","map","_this6","_this7","text","_this8","keyCode","preventDefault","add","destroy","footer","main","todoItems","todo_item_TodoItem","toggle","activeTodoCount","reduce","accum","footer_TodoFooter","htmlFor","placeholder","autoFocus","render","react_default","createElement","todo_app_TodoApp","document","getElementById"],"mappings":"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","file":"static/js/main.fe7a4726.chunk.js","sourcesContent":["import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nvar ESCAPE_KEY = 27;\nvar ENTER_KEY = 13;\n\nexport class TodoItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { editText: this.props.todo.title };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      nextProps.todo !== this.props.todo ||\n      nextProps.editing !== this.props.editing ||\n      nextState.editText !== this.state.editText\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.editing && this.props.editing) {\n      var node = ReactDOM.findDOMNode(this.refs.editField);\n      node.focus();\n      node.setSelectionRange(node.value.length, node.value.length);\n    }\n  }\n\n  handleSubmit(event) {\n    var val = this.state.editText.trim();\n    if (val) {\n      this.props.onSave(this.props.todo, val);\n    } else {\n      this.props.onDestroy();\n    }\n  }\n\n  handleEdit() {\n    this.props.onEdit(this.props.todo);\n    this.setState({ editText: this.props.todo.title });\n  }\n\n  handleKeyDown(event) {\n    if (event.which === ESCAPE_KEY) {\n      this.setState({ editText: this.props.todo.title });\n      this.props.onCancel(event);\n    } else if (event.which === ENTER_KEY) {\n      this.handleSubmit(event);\n    }\n  }\n\n  handleChange(event) {\n    if (this.props.editing === this.props.todo.id) {\n      this.setState({ editText: event.target.value });\n    }\n  }\n\n  render() {\n    let status =\n      this.props.editing === this.props.todo.id\n        ? \"editing\"\n        : this.props.todo.completed\n          ? \"completed\"\n          : \"static\";\n\n    return (\n      <li className={status}>\n        <div className=\"view\">\n          <input\n            className=\"toggle\"\n            type=\"checkbox\"\n            checked={this.props.todo.completed}\n            onChange={this.props.onToggle}\n          />\n          <label onDoubleClick={this.handleEdit}>{this.props.todo.title}</label>\n          <button className=\"destroy\" onClick={this.props.onDestroy} />\n        </div>\n        <input\n          ref=\"editField\"\n          className=\"edit\"\n          value={this.state.editText}\n          onBlur={this.handleSubmit}\n          onChange={this.handleChange}\n          onKeyDown={this.handleKeyDown}\n        />\n      </li>\n    );\n  }\n}\n","import * as React from \"react\";\n\nexport class TodoFooter extends React.PureComponent {\n  render() {\n    var pluralize = function(count, word) {\n      return count === 1 ? word : word + \"s\";\n    };\n    var activeTodoWord = pluralize(this.props.count, \"item\");\n    var clearButton = null;\n\n    if (this.props.completedCount > 0) {\n      clearButton = (\n        <button\n          className=\"clear-completed\"\n          onClick={this.props.onClearCompleted}\n        >\n          Clear completed\n        </button>\n      );\n    }\n\n    var nowShowing = this.props.nowShowing;\n    return (\n      <footer className=\"footer\">\n        <span className=\"todo-count\">\n          <strong>{this.props.count}</strong> {activeTodoWord} left\n        </span>\n        <ul className=\"filters\">\n          <li>\n            <a\n              onClick={this.props.showAll}\n              href=\"#/\"\n              className={nowShowing === \"all\" ? \"selected\" : \"not-selected\"}\n            >\n              All\n            </a>\n          </li>{\" \"}\n          <li>\n            <a\n              onClick={this.props.showActive}\n              href=\"#/active\"\n              className={nowShowing === \"active\" ? \"selected\" : \"not-selected\"}\n            >\n              Active\n            </a>\n          </li>{\" \"}\n          <li>\n            <a\n              onClick={this.props.showCompleted}\n              href=\"#/completed\"\n              className={\n                nowShowing === \"completed\" ? \"selected\" : \"not-selected\"\n              }\n            >\n              Completed\n            </a>\n          </li>\n        </ul>\n        {clearButton}\n      </footer>\n    );\n  }\n}\n","import * as React from \"react\";\nimport uuidv4 from \"uuid/v4\";\nimport Pact from \"pact-lang-api\";\n\nimport { TodoItem } from \"./todo-item.jsx\";\nimport { TodoFooter } from \"./footer.jsx\";\n\nconst ENTER_KEY = 13;\nconst KP = Pact.crypto.genKeyPair();\nconst API_HOST = \"http://localhost:9001\";\n\nconst ALL_TODOS = \"all\";\nconst ACTIVE_TODOS = \"active\";\nconst COMPLETED_TODOS = \"completed\";\n\nexport class TodoApp extends React.PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      todos: [],\n      onChanges: [],\n      nowShowing: ALL_TODOS,\n      editing: null,\n      newTodo: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleNewTodoKeyDown = this.handleNewTodoKeyDown.bind(this);\n    this.toggleAll = this.toggleAll.bind(this);\n    this.edit = this.edit.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.clearCompleted = this.clearCompleted.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.save = this.save.bind(this);\n    this.showActive = this.showActive.bind(this);\n    this.showCompleted = this.showCompleted.bind(this);\n    this.showAll = this.showAll.bind(this);\n  }\n\n  componentDidMount() {\n    this.getTodos();\n  }\n\n  getTodos() {\n    const cmdObj = {\n      pactCode: `(todos.read-todos)`,\n      keyPairs: KP\n    };\n    \n    return Pact.fetch\n      .local(cmdObj, API_HOST)\n      .then(res => res.data)\n      .then(todos => {\n        const notDeleted = todos\n          .filter(todo => {\n            return todo.deleted === false;\n          })\n          .sort((a, b) => {\n            if (a.title < b.title) return -1;\n            if (b.title > a.title) return 1;\n            return 0;\n          });\n        this.setState({ todos: notDeleted });\n      });\n  }\n\n  add(title) {\n    const uuid = uuidv4();\n    const cmdObj = {\n      pactCode: `(todos.new-todo ${JSON.stringify(uuid)} ${JSON.stringify(title)})`,\n      keyPairs: KP\n    };\n\n    Pact.fetch.send(cmdObj, API_HOST)\n      .then(() => this.getTodos());\n  }\n\n  toggle(todo) {\n    const cmdObj = {\n      pactCode: `(todos.toggle-todo-status ${JSON.stringify(todo.id)})`,\n      keyPairs: KP\n    };\n\n    Pact.fetch.send(cmdObj, API_HOST)\n      .then(() => this.getTodos());\n  }\n\n  toggleAll() {\n    const activeTodos = this.state.todos.filter(todo => !todo.completed);\n    const completedTodos = this.state.todos.filter(todo => todo.completed);\n    const toggleTodos =\n      this.state.todos.length === completedTodos.length\n        ? completedTodos\n        : activeTodos;\n    const cmds = toggleTodos.map(todo => {\n      return {\n        pactCode: `(todos.toggle-todo-status ${JSON.stringify(todo.id)})`,\n        keyPairs: KP\n      };\n    });\n\n    Pact.fetch.send(cmds, API_HOST)\n      .then(() => this.getTodos());\n  }\n\n  destroy(todo) {\n    const cmdObj = {\n      pactCode: `(todos.delete-todo ${JSON.stringify(todo.id)})`,\n      keyPairs: KP\n    };\n\n    Pact.fetch.send(cmdObj, API_HOST)\n      .then(() => this.getTodos());\n  }\n\n  clearCompleted() {\n    const completedTodos = this.state.todos.filter(todo => todo.completed);\n    const cmds = completedTodos.map(todo => {\n      return {\n        pactCode: `(todos.delete-todo ${JSON.stringify(todo.id)})`,\n        keyPairs: KP\n      };\n    });\n\n    Pact.fetch.send(cmds, API_HOST)\n      .then(() => this.getTodos());\n  }\n\n  save(todo, text) {\n    const cmdObj = {\n      pactCode: `(todos.edit-todo ${JSON.stringify(todo.id)} ${JSON.stringify(text)})`,\n      keyPairs: KP\n    };\n\n    Pact.fetch.send(cmdObj, API_HOST)\n      .then(() => this.getTodos());\n\n    this.setState({ editing: null });\n  }\n\n  edit(todo) {\n    this.setState({ editing: todo.id });\n  }\n\n  cancel() {\n    this.setState({ editing: null });\n  }\n\n  showActive() {\n    this.setState({ nowShowing: ACTIVE_TODOS });\n  }\n\n  showCompleted() {\n    this.setState({ nowShowing: COMPLETED_TODOS });\n  }\n\n  showAll() {\n    this.setState({ nowShowing: ALL_TODOS });\n  }\n\n  handleChange(event) {\n    this.setState({ newTodo: event.target.value });\n  }\n\n  handleNewTodoKeyDown(event) {\n    if (event.keyCode !== ENTER_KEY) {\n      return;\n    }\n\n    event.preventDefault();\n\n    var val = this.state.newTodo.trim();\n\n    if (val) {\n      this.add(val);\n      this.setState({ newTodo: \"\" });\n    }\n  }\n\n  handleSubmit() {\n    var val = this.state.editText.trim();\n    if (val) {\n      this.save(val);\n      this.getTodos();\n    } else {\n      this.destroy();\n      this.getTodos();\n    }\n  }\n\n  render() {\n    var footer;\n    var main;\n    var todos = this.state.todos;\n    var shownTodos = todos.filter(function(todo) {\n      switch (this.state.nowShowing) {\n        case ACTIVE_TODOS:\n          return !todo.completed;\n        case COMPLETED_TODOS:\n          return todo.completed;\n        default:\n          return true;\n      }\n    }, this);\n\n    var todoItems = shownTodos.map(function(todo) {\n      return (\n        <TodoItem\n          key={todo.id}\n          todo={todo}\n          onToggle={this.toggle.bind(this, todo)}\n          onDestroy={this.destroy.bind(this, todo)}\n          onEdit={this.edit}\n          onSave={this.save}\n          editing={this.state.editing}\n          onCancel={this.cancel}\n        />\n      );\n    }, this);\n\n    var activeTodoCount = todos.reduce(function(accum, todo) {\n      return todo.completed ? accum : accum + 1;\n    }, 0);\n\n    var completedCount = todos.length - activeTodoCount;\n\n    if (activeTodoCount || completedCount) {\n      footer = (\n        <TodoFooter\n          count={activeTodoCount}\n          completedCount={completedCount}\n          nowShowing={this.state.nowShowing}\n          onClearCompleted={this.clearCompleted}\n          showActive={this.showActive}\n          showCompleted={this.showCompleted}\n          showAll={this.showAll}\n        />\n      );\n    }\n\n    if (todos.length) {\n      main = (\n        <section className=\"main\">\n          <input\n            id=\"toggle-all\"\n            className=\"toggle-all\"\n            type=\"checkbox\"\n            onChange={this.toggleAll}\n            checked={activeTodoCount === 0}\n          />\n          <label htmlFor=\"toggle-all\" />\n          <ul className=\"todo-list\">{todoItems}</ul>\n        </section>\n      );\n    }\n\n    return (\n      <div>\n        <header className=\"header\">\n          <h1>todos</h1>\n          <input\n            className=\"new-todo\"\n            placeholder=\"What needs to be done?\"\n            value={this.state.newTodo}\n            onKeyDown={this.handleNewTodoKeyDown}\n            onChange={this.handleChange}\n            autoFocus={true}\n          />\n        </header>\n        {main}\n        {footer}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { TodoApp } from \"./components/todo-app\";\n\nReactDOM.render(<TodoApp />, document.getElementById(\"root\"));\n"],"sourceRoot":""}