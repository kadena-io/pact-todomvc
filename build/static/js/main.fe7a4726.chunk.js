(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(34)},19:function(e,t,n){},32:function(e,t){},34:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(8),s=n.n(a),l=(n(19),n(3)),c=n(4),d=n(6),r=n(5),h=n(1),u=n(7),p=n(13),m=n.n(p),g=n(2),f=n.n(g),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(r.a)(t).call(this,e))).state={editText:n.props.todo.title},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleKeyDown=n.handleKeyDown.bind(Object(h.a)(n)),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.todo!==this.props.todo||e.editing!==this.props.editing||t.editText!==this.state.editText}},{key:"componentDidUpdate",value:function(e){if(!e.editing&&this.props.editing){var t=s.a.findDOMNode(this.refs.editField);t.focus(),t.setSelectionRange(t.value.length,t.value.length)}}},{key:"handleSubmit",value:function(e){var t=this.state.editText.trim();t?this.props.onSave(this.props.todo,t):this.props.onDestroy()}},{key:"handleEdit",value:function(){this.props.onEdit(this.props.todo),this.setState({editText:this.props.todo.title})}},{key:"handleKeyDown",value:function(e){27===e.which?(this.setState({editText:this.props.todo.title}),this.props.onCancel(e)):13===e.which&&this.handleSubmit(e)}},{key:"handleChange",value:function(e){this.props.editing===this.props.todo.id&&this.setState({editText:e.target.value})}},{key:"render",value:function(){var e=this.props.editing===this.props.todo.id?"editing":this.props.todo.completed?"completed":"static";return o.createElement("li",{className:e},o.createElement("div",{className:"view"},o.createElement("input",{className:"toggle",type:"checkbox",checked:this.props.todo.completed,onChange:this.props.onToggle}),o.createElement("label",{onDoubleClick:this.handleEdit},this.props.todo.title),o.createElement("button",{className:"destroy",onClick:this.props.onDestroy})),o.createElement("input",{ref:"editField",className:"edit",value:this.state.editText,onBlur:this.handleSubmit,onChange:this.handleChange,onKeyDown:this.handleKeyDown}))}}]),t}(o.Component),b=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=(e=this.props.count,t="item",1===e?t:t+"s"),i=null;this.props.completedCount>0&&(i=o.createElement("button",{className:"clear-completed",onClick:this.props.onClearCompleted},"Clear completed"));var a=this.props.nowShowing;return o.createElement("footer",{className:"footer"},o.createElement("span",{className:"todo-count"},o.createElement("strong",null,this.props.count)," ",n," left"),o.createElement("ul",{className:"filters"},o.createElement("li",null,o.createElement("a",{onClick:this.props.showAll,href:"#/",className:"all"===a?"selected":"not-selected"},"All"))," ",o.createElement("li",null,o.createElement("a",{onClick:this.props.showActive,href:"#/active",className:"active"===a?"selected":"not-selected"},"Active"))," ",o.createElement("li",null,o.createElement("a",{onClick:this.props.showCompleted,href:"#/completed",className:"completed"===a?"selected":"not-selected"},"Completed"))),i)}}]),t}(o.PureComponent),w=f.a.crypto.genKeyPair(),y="http://localhost:9001",C="all",k=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(r.a)(t).call(this))).state={todos:[],onChanges:[],nowShowing:C,editing:null,newTodo:""},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleNewTodoKeyDown=e.handleNewTodoKeyDown.bind(Object(h.a)(e)),e.toggleAll=e.toggleAll.bind(Object(h.a)(e)),e.edit=e.edit.bind(Object(h.a)(e)),e.cancel=e.cancel.bind(Object(h.a)(e)),e.clearCompleted=e.clearCompleted.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.save=e.save.bind(Object(h.a)(e)),e.showActive=e.showActive.bind(Object(h.a)(e)),e.showCompleted=e.showCompleted.bind(Object(h.a)(e)),e.showAll=e.showAll.bind(Object(h.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getTodos()}},{key:"getTodos",value:function(){var e=this,t={pactCode:"(todos.read-todos)",keyPairs:w};return f.a.fetch.local(t,y).then(function(e){return e.data}).then(function(t){var n=t.filter(function(e){return!1===e.deleted}).sort(function(e,t){return e.title<t.title?-1:t.title>e.title?1:0});e.setState({todos:n})})}},{key:"add",value:function(e){var t=this,n=m()(),o={pactCode:"(todos.new-todo ".concat(JSON.stringify(n)," ").concat(JSON.stringify(e),")"),keyPairs:w};f.a.fetch.send(o,y).then(function(){return t.getTodos()})}},{key:"toggle",value:function(e){var t=this,n={pactCode:"(todos.toggle-todo-status ".concat(JSON.stringify(e.id),")"),keyPairs:w};f.a.fetch.send(n,y).then(function(){return t.getTodos()})}},{key:"toggleAll",value:function(){var e=this,t=this.state.todos.filter(function(e){return!e.completed}),n=this.state.todos.filter(function(e){return e.completed}),o=(this.state.todos.length===n.length?n:t).map(function(e){return{pactCode:"(todos.toggle-todo-status ".concat(JSON.stringify(e.id),")"),keyPairs:w}});f.a.fetch.send(o,y).then(function(){return e.getTodos()})}},{key:"destroy",value:function(e){var t=this,n={pactCode:"(todos.delete-todo ".concat(JSON.stringify(e.id),")"),keyPairs:w};f.a.fetch.send(n,y).then(function(){return t.getTodos()})}},{key:"clearCompleted",value:function(){var e=this,t=this.state.todos.filter(function(e){return e.completed}).map(function(e){return{pactCode:"(todos.delete-todo ".concat(JSON.stringify(e.id),")"),keyPairs:w}});f.a.fetch.send(t,y).then(function(){return e.getTodos()})}},{key:"save",value:function(e,t){var n=this,o={pactCode:"(todos.edit-todo ".concat(JSON.stringify(e.id)," ").concat(JSON.stringify(t),")"),keyPairs:w};f.a.fetch.send(o,y).then(function(){return n.getTodos()}),this.setState({editing:null})}},{key:"edit",value:function(e){this.setState({editing:e.id})}},{key:"cancel",value:function(){this.setState({editing:null})}},{key:"showActive",value:function(){this.setState({nowShowing:"active"})}},{key:"showCompleted",value:function(){this.setState({nowShowing:"completed"})}},{key:"showAll",value:function(){this.setState({nowShowing:C})}},{key:"handleChange",value:function(e){this.setState({newTodo:e.target.value})}},{key:"handleNewTodoKeyDown",value:function(e){if(13===e.keyCode){e.preventDefault();var t=this.state.newTodo.trim();t&&(this.add(t),this.setState({newTodo:""}))}}},{key:"handleSubmit",value:function(){var e=this.state.editText.trim();e?(this.save(e),this.getTodos()):(this.destroy(),this.getTodos())}},{key:"render",value:function(){var e,t,n=this.state.todos,i=n.filter(function(e){switch(this.state.nowShowing){case"active":return!e.completed;case"completed":return e.completed;default:return!0}},this).map(function(e){return o.createElement(v,{key:e.id,todo:e,onToggle:this.toggle.bind(this,e),onDestroy:this.destroy.bind(this,e),onEdit:this.edit,onSave:this.save,editing:this.state.editing,onCancel:this.cancel})},this),a=n.reduce(function(e,t){return t.completed?e:e+1},0),s=n.length-a;return(a||s)&&(e=o.createElement(b,{count:a,completedCount:s,nowShowing:this.state.nowShowing,onClearCompleted:this.clearCompleted,showActive:this.showActive,showCompleted:this.showCompleted,showAll:this.showAll})),n.length&&(t=o.createElement("section",{className:"main"},o.createElement("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:0===a}),o.createElement("label",{htmlFor:"toggle-all"}),o.createElement("ul",{className:"todo-list"},i))),o.createElement("div",null,o.createElement("header",{className:"header"},o.createElement("h1",null,"todos"),o.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",value:this.state.newTodo,onKeyDown:this.handleNewTodoKeyDown,onChange:this.handleChange,autoFocus:!0})),t,e)}}]),t}(o.PureComponent);s.a.render(i.a.createElement(k,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.fe7a4726.chunk.js.map